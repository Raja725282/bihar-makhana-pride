<!-- Google Analytics 4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX', {
    page_title: document.title,
    page_location: window.location.href,
    custom_map: {
      'custom_parameter_1': 'makhana_page_type',
      'custom_parameter_2': 'user_location'
    }
  });

  // Enhanced E-commerce Tracking for Product Views
  function trackProductView(productName, productCategory, productPrice) {
    gtag('event', 'view_item', {
      currency: 'INR',
      value: productPrice,
      items: [{
        item_id: productName.toLowerCase().replace(/\s+/g, '-'),
        item_name: productName,
        category: productCategory,
        price: productPrice
      }]
    });
  }

  // Track Quote Requests
  function trackQuoteRequest(productType, quantity) {
    gtag('event', 'generate_lead', {
      currency: 'INR',
      value: 100, // Estimated lead value
      lead_type: 'quote_request',
      product_type: productType,
      quantity: quantity
    });
  }

  // Track Contact Form Submissions
  function trackContactSubmission(formType) {
    gtag('event', 'form_submit', {
      form_type: formType,
      engagement_time_msec: Date.now() - performance.timing.navigationStart
    });
  }

  // Track Download Events (Catalogs, Brochures)
  function trackDownload(fileName, fileType) {
    gtag('event', 'file_download', {
      file_name: fileName,
      file_type: fileType,
      link_url: window.location.href
    });
  }

  // Track Scroll Depth
  let scrollDepthMarkers = [25, 50, 75, 100];
  let scrollDepthFired = [];
  
  window.addEventListener('scroll', function() {
    let scrollPercentage = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
    
    scrollDepthMarkers.forEach(function(marker) {
      if (scrollPercentage >= marker && scrollDepthFired.indexOf(marker) === -1) {
        scrollDepthFired.push(marker);
        gtag('event', 'scroll', {
          percent_scrolled: marker
        });
      }
    });
  });
</script>

<!-- Google Search Console Verification -->
<meta name="google-site-verification" content="your-google-search-console-verification-code" />

<!-- Bing Webmaster Tools -->
<meta name="msvalidate.01" content="your-bing-verification-code" />

<!-- Yandex Webmaster -->
<meta name="yandex-verification" content="your-yandex-verification-code" />

<!-- Facebook Domain Verification -->
<meta name="facebook-domain-verification" content="your-facebook-domain-verification" />

<!-- Google Tag Manager (Optional - Alternative to GA4) -->
<!-- 
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-XXXXXXXXX');</script>
-->

<!-- Schema.org Structured Data for Analytics -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Bihar Makhana",
  "url": "https://biharmakhana.com",
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": "https://biharmakhana.com/search?q={search_term_string}"
    },
    "query-input": "required name=search_term_string"
  }
}
</script>

<!-- Performance Monitoring -->
<script>
  // Core Web Vitals tracking
  function sendToGoogleAnalytics({name, delta, value, id}) {
    gtag('event', name, {
      event_category: 'Web Vitals',
      event_label: id,
      value: Math.round(name === 'CLS' ? delta * 1000 : delta),
      non_interaction: true,
    });
  }

  // Load web-vitals library
  import {getCLS, getFID, getFCP, getLCP, getTTFB} from 'web-vitals';
  
  getCLS(sendToGoogleAnalytics);
  getFID(sendToGoogleAnalytics);
  getFCP(sendToGoogleAnalytics);
  getLCP(sendToGoogleAnalytics);
  getTTFB(sendToGoogleAnalytics);
</script>
